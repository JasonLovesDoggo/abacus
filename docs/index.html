<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title>Abacus - A free counting API</title>
    <link rel="icon" href="https://abacus.jasoncameron.dev/favicon.svg" type=”image/svg+xml”>
    <link rel="icon" href="https://abacus.jasoncameron.dev/favicon.ico" type="image/png">
    <link rel="shortcut icon" href="https://abacus.jasoncameron.dev/favicon.ico">

    <link rel="canonical" href="https://abacus.jasoncameron.dev">
    <meta name="description"
          content="Abacus is a free counting service. You can use it to track page hits, and specific events among other things.">
    <meta name="keywords"
          content="countapi, countapi.xyz, counting, count, api, abacus, free api, visitor count, hit counter, page counter, visitors, number counter api, countapi replacement">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Abacus">
    <meta property="og:title" content="Abacus">
    <meta property="og:description"
          content="Abacus is a free counting service. You can use it to track page hits, and specific events among other things.">
    <meta property="og:url" content="https://abacus.jasoncameron.dev">
    <meta property="og:image" content="abacus.jasoncameron.dev/favicon.ico">
    <meta property="og:image:width" content="64">
    <meta property="og:image:height" content="64">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
    <style>
        @import url("https://fonts.googleapis.com/css?family=Open+Sans:400,700");

        * {
            margin: 0;
            padding: 0;
            outline: none;
            box-sizing: border-box;
            font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
        }

        body {
            color: #606c71;
        }

        ::selection {
            background-color: #4688cc;
        }

        *::selection {
            color: white;
        }

        a {
            text-decoration: none;
            color: #4688cc;
        }

        a:hover {
            text-decoration: underline;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        .header {
            padding: 3rem 4rem;
            color: white;
            text-align: center;
            background-color: #125b96;
            background-image: linear-gradient(
                    55deg,
                    hsl(211deg 74% 38%) 0%,
                    hsl(271deg 39% 45%) 38%,
                    hsl(321deg 86% 36%) 100%
            );            box-shadow: inset 0 -2px 2px -2px rgba(0, 0, 0, 0.8);
        }

        .header .title {
            text-shadow: 1px 1px 5px black;
        }

        .header .legend {
            font-size: 1.15rem;
            font-weight: normal;
            margin-top: 0.4rem;
            opacity: 0.7;
        }

        .container {
            max-width: 960px;
            margin: auto;
            padding: 2rem 4rem;
            font-size: 1.1rem;
            word-wrap: break-word;
        }

        .container h1,
        .container h2,
        .container h3,
        .container h4,
        .container h5,
        .container h6 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: normal;
            color: #1785aa;
        }

        .container h1 {
            border-bottom: 1px solid rgba(201, 201, 201, 0.33);
        }

        .container p {
            margin-bottom: 1em;
        }

        .container ol, .container ul {
            margin-top: 0;
            padding: 0.3rem 2.2rem;
        }

        .container code {
            padding: 2px 4px;
            background-color: #efefef;
            border-radius: 4px;
        }

        .container pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            padding: 10px 10px 10px 20px;
            border-radius: 0 5px 5px 0;
            font-size: 15px;
            border-left: 8px solid #ffffff;
            color: #707070;
            margin-bottom: 1em;
        }

        .container pre.info {
            border-color: #5087af;
            background-color: #f3f7f8;
            font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
        }

        .container pre.success {
            border-color: #50af51;
            background-color: #f3f8f3;
        }

        .container pre.fail {
            border-color: #af5050;
            background-color: #f8f3f3;
        }

        .container pre, .container pre a, .container .endpoint {
            font-family: Monaco, "Lucida Console", monospace;
        }

        .container table {
            display: block;
            width: 100%;
            overflow: auto;
            margin-bottom: 1em;
        }

        .container table th, .container table td {
            padding: 0.5rem 1rem;
            border: 1px solid #e9ebec;
            min-width: 140px;
        }

        .container .highlight {
            white-space: pre;
            font-family: monospace;
            font-size: 16px;
            border-radius: 2px;
            margin-bottom: 1em;
        }

        .container .highlight code {
            background-color: rgba(239, 239, 239, 0.1);
        }

        .container .highlight * {
            font-family: monospace;
        }

        footer {
            padding-top: 1rem;
            margin-top: 2rem;
            border-top: solid 1px #eff0f1;
        }

        @media screen and (max-width: 768px) {
            .container {
                padding: 2rem 2rem;
            }
        }
    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-98HKBC9VCP"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-98HKBC9VCP');
    </script>
</head>
<body>
<header class="header">
    <img src="https://abacus.jasoncameron.dev/favicon.svg" width="96" alt="A logo of an ABACUS">
    <h1 class="title">Abacus</h1>
    <h2 class="legend">Counting should be easy, right?</h2>
</header>
<section class="container">
    <h2 id="abacus">Abacus - <a href="https://github.com/JasonLovesDoggo/abacus" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
        </svg>
    </a> </h2>
    <p>
        This API allows you to create simple numeric counters. IaaS, Integer as a Service.
    </p>

    <p style="margin-bottom: 2px">It goes down to:</p>
    <ul>
        <li>Create & Increment counter </li>
        <li>View counter's data</li>
    </ul>
    <p>All counters are “unlisted”—accessible if you know the key but not publicly listed anywhere.</p>

    <p>
        Want to track the number of hits a page had? Sure.<br>
        Want to know the number of users that clicked on the button “Press me”? There you go.
    </p>

    <p>
        So far, <code data-stat-id="keys">...</code> keys have been created and there have been <code
            data-stat-id="command_total">...</code> requests served. <code data-stat-id="hits">...</code> of those have been hits and <code data-stat-id="gets">...</code> have been gets. Abacus is currently on version <code
            data-stat-id="version">...</code>.<br>
        This page has been visited <code id="visits">...</code> times.
    </p>
    <h1 id="tldr">TL;DR</h1>
    <p>
        Each counter is identified inside a <b>namespace</b> with a <b>key</b>.<br>
        The namespace should be unique, so its recommend using your site's domain.<br>
        Inside each namespace you can generate all the counters you may need.
    </p>
    <p>The <b>hit</b> endpoint provides increment by one counters directly. Each time its requested the counter will
        increase by one:</p>
    <pre class="success" style="font-size: 1em">
<a href="https://abacus.jasoncameron.dev/hit/namespace/key" target="_blank">https://abacus.jasoncameron.dev/hit/<code>namespace</code>/<code>key</code></a>⇒ 200 { "value": 1234 }</pre>
    <p>Want to start counting right away? Check the examples below!</p>
    <h1 id="example">Example</h1>
    <p>Let’s say you want to display the amount of page views a site received.</p>
    <div class="highlight html">&lt;div id="visits"&gt;...&lt;/div&gt;</div>
    <pre class="info">Remember to change <input type="text" id="domain" value="mysite.com" maxlength="64"
                                                                            autocomplete="off" autocorrect="off" autocapitalize="off"
                                                                            spellcheck="false"> <label
            for="domain">with your site's <b>domain</b></label>.</pre>
    <h4>Using JSONP</h4>
      <div class="highlight html">&lt;script&gt;
function cb(response) {
    document.getElementById('visits').innerText = response.value;
}
&lt;/script&gt;
&lt;script async src="https://abacus.jasoncameron.dev/hit/mysite.com/visits?callback=cb">&lt;/script&gt;</div>
      <h4>Using XHR</h4>
      <div class="highlight js"> var xhr = new XMLHttpRequest();
   xhr.open("GET", "https://abacus.jasoncameron.dev/hit/<code class="mysite">mysite.com</code>/visits");
   xhr.responseType = "json";
   xhr.onload = function() {
      document.getElementById('visits').innerText = this.response.value;
   }
   xhr.send();</div>
    <h4>Using jQuery</h4>
    <div class="highlight js">$.getJSON("https://abacus.jasoncameron.dev/hit/<code class="mysite">mysite.com</code>/visits",
    function(response) {
        $("#visits").text(response.value);
});
    </div>
    <h3>Multiple pages</h3>
    <p>If you want to have a counter for each individual page you can replace <code>visits</code> with a unique
        identifier for each page, i.e. <code>index</code>, <code>contact</code>, <code>item-1234</code>. Check <a
                href="#format">the right format</a> a key must have.</p>
    <p>Alternatively, you can use some reserved words that are replaced server-side.<br>For example, if a request is
        made from <code>https://mysite.com/example/page</code>:</p>
    <ul>
        <li><code>:HOST:</code> will be replaced with <code>mysite.com</code></li>
        <li><code>:PATH:</code> will be replaced with <code>examplepage</code></li>
    </ul>
    <br>
    <pre class="info">Note: Reserved words are left padded with dots if their length is less than three.</pre>
    <p>So you could use something like:</p>
    <pre class="success"><a href="https://abacus.jasoncameron.dev/hit/mysite.com/:PATH:" target="_blank">https://abacus.jasoncameron.dev/hit/<code>mysite.com</code>/:PATH:</a></pre>
    <p>Or even more generic (though not recommended):</p>
    <pre class="success"><a href="https://abacus.jasoncameron.dev/hit/:HOST:/:PATH:" target="_blank">https://abacus.jasoncameron.dev/hit/:HOST:/:PATH:</a></pre>
    <!--    <pre class="info"><b>Important</b>: if you want to know the actual key used you can check the <code>X-Path</code> header.</pre>-->
    <h3>Counting events</h3>
    <p>You can use the API to count any kind of stuff, let’s say:</p>
    <div class="highlight html">&lt;button onclick="clicked()"&gt;Press Me!&lt;/button&gt;
&lt;script&gt;
function clicked() {
    let xhr = new XMLHttpRequest();
    xhr.open("GET", "https://abacus.jasoncameron.dev/hit/<code class="mysite">mysite.com</code>/awesomeclick");
    xhr.responseType = "json";
    xhr.onload = function() {
        alert(`This button has been clicked ${this.response.value} times!`);
    }
    xhr.send();
}
&lt;/script&gt;
    </div>
    <button onclick="clicked()">Press Me!</button>
    <script>
        function clicked() {
            let xhr = new XMLHttpRequest();
            xhr.open("GET", "https://abacus.jasoncameron.dev/hit/mysite.com/awesomeclick");
            xhr.responseType = "json";
            xhr.onload = function () {
                alert(`This button has been clicked ${this.response.value} times!`);
            }
            xhr.send();
        }
    </script>
    <h1 id="faq">FAQ</h1>
    <h2>Where is the API documentation?</h2>
    <p><a href="#api">Scroll</a> a bit further.</p>
    <h2>Is the API free?</h2>
    <p>Completely free.</p>
    <h2>Rate Limiting?</h2>
    <h4>General Rate Limit</h4>

    <ul>
        <li><strong>Limit:</strong> 30 requests</li>
        <li><strong>Window:</strong> 3 seconds</li>
        <li><strong>Scope:</strong> Per IP address</li>
    </ul>
    <p>
        This means that each unique IP address is allowed to make a maximum of 30 requests every 3 seconds. Exceeding
        this limit will temporarily block further requests from that IP until your limit is up.
    </p>
    <p>If you require a higher rate limit for legitimate use cases, please contact me at <a
            href="mailto:abacus@jasoncameron.dev">abacus@jasoncameron.dev</a>.</p>

    <h4>Rate Limit Headers</h4>

    <p>The API provides informative headers in responses to help you track your usage:</p>
    <ul>
        <li><code>RateLimit-Remaining</code>: Number of requests remaining in the current window.</li>
        <li><code>RateLimit-Reset</code>: Unix timestamp indicating when the rate limit window resets.</li>
        <li><code>RateLimit-Policy</code>: String describing the rate limit policy (e.g., "30;w=3" for 30 requests per 3
            seconds).
        </li>
        <li><code>Retry-After</code>: Number of ms to wait before retrying (included when rate limited).</li>


    </ul>
    <h4>Rate Limit Exceeded</h4>
    When you exceed the rate limit, the API will respond with a <code>429 Too Many Requests</code> status code response
    similar to:
    <pre style="margin-top: 1vh" class="success">{
    "error": "Too many requests. Try again in 2s"
}
</pre>
    <h2>Can I delete a key?</h2>
    <p>If you originally created the key using the <a href="#create">/create endpoint</a>, then yes, you can delete the
        key and all data associated with it by using the <a href="#delete"> /delete</a> endpoint along with your admin key.</p>
    <h2>Will I blow up the Abacus server?</h2>
    <p>Abacus is using <a href="https://valkey.io/" target="_blank">Valkey</a> as a database, a rapid key-value
        solution.<br>If you are planning to make <b>tens of thousands</b> of requests, I'll be glad if you <a
                href="mailto:abacus@jasoncameron.dev">email me</a> letting me know.</p>
    <h2 id="contact">Issues/Contact</h2>
    <p>If you have issues, suggestions or just want to contact me, shoot me <a href="mailto:abacus@jasoncameron.dev"
                                                                               target="_blank">an email</a> or <a
            href="https://github.com/JasonLovesDoggo/abacus/issues/new">create a GitHub issue.</a></p>
    <h1 id="api">API</h1>

    <h2>Authentication & Rate Limiting</h2>

    <p>Endpoints requiring administrative actions (delete, set, reset, update) need an admin key passed in the
        `Authorization` header as a Bearer token. You get this admin key when creating a counter via <a href="#create">/create</a>.
    </p>

    <p>Rate limiting is in place to ensure fair usage: 30 requests per IP address every 3 seconds.</p>

    <h2>Namespaces</h2>

    <p>Namespaces are used to avoid name collisions.
        You can specify a namespace when creating a key.
        It's recommended to use the domain of your app as the namespace to prevent conflicts with other websites.<br>If
        you don't
        specify a namespace, the key is assigned to the <code>default</code> namespace.
        You don't need to specify the `default` namespace in your requests.</p>

    <h2>Endpoints</h2>

    <p>
        All requests support <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank">cross-origin
        resource sharing</a> (CORS) and SSL.
    </p>

    <p>Base API path: <a href="https://abacus.jasoncameron.dev" target="_blank">https://abacus.jasoncameron.dev</a></p>

    <p>In case of a server failure, the API will send:</p>

    <pre class="fail">⇒ 500 { "error": "Error description" }</pre>

    <h3 class="endpoint">/healthcheck</h3>
    <p>Check the health and uptime of the API.</p>
    <pre class="success">
<a href="https://abacus.jasoncameron.dev/healthcheck" target="_blank">GET /healthcheck</a>
⇒ 200 { "status": "ok", "uptime": "1h23m45s" }</pre>

    <h3 class="endpoint">/docs</h3>
    <p>Redirects to the API documentation.</p>

    <h3 class="endpoint">/get/:namespace/*key</h3>
    <p>Retrieve the current value of a counter. Optionally specify the namespace.</p>
    <pre class="info">If you want to use JSONP, please pass in the callback via the ?callback query param (e.g. ?callback=myjsfunction) </pre>

    <pre class="success">
<a href="https://abacus.jasoncameron.dev/get/test" target="_blank">GET /get/test</a>
⇒ 200 { "value": 42 }</pre>
    <pre class="fail">
<a href="https://abacus.jasoncameron.dev/get/nonexisting" target="_blank">GET /get/nonexisting</a>
⇒ 404 { "error": "Key not found" }</pre>

    <h3 class="endpoint">/hit/:namespace/*key</h3>
    <p>Increment a counter by 1 and return the new value. If the counter doesn't exist, it will be created. Optionally
        specify a namespace</p>

    <pre class="info">If you want to use JSONP, please pass in the callback via the ?callback query param (e.g. ?callback=myjsfunction) </pre>


    <pre class="success">
<a href="https://abacus.jasoncameron.dev/hit/mysite.com/visits" target="_blank">GET /hit/mysite.com/visits</a> (value was 35)
⇒ 200 { "value": 36 }</pre>
    <pre class="success">
<a href="https://abacus.jasoncameron.dev/hit/nonexisting" target="_blank">GET /hit/nonexisting</a> (key is created)
⇒ 200 { "value": 1 }</pre>

    <h3 class="endpoint">/stream/:namespace/*key</h3>
    <p>Stream updates to a counter's value using <a
            href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events#Receiving_events_from_the_server"
            target="_blank">Server-Sent Events (SSE)</a>. This means you get updated right as a key is updated instead
        of having to poll. Optionally specify a namespace.</p>
    <pre class="success">
<a href="https://abacus.jasoncameron.dev/stream/mysite.com/visits" target="_blank">GET /stream/mysite.com/visits</a>
⇒ data: {"value": 36}
</pre>

    <h3 id="create" class="endpoint">/create/:namespace/*key</h3>
    <p>Create a new counter with an optional initial value (default 0). Specify both namespace and key. </p>
    <pre class="info">Note about <b>admin_key</b>: this is the only time you will be able to see it, if you lose the key then you lose access to control the counter. </pre>

    <pre class="info">Note about <b>expiration</b>: Every time a key is accessed its expiration is set to <b>6 months</b>. So don't worry, if you still using it, it won't expire.</pre>
    <pre class="info" id="format">Keys and namespaces must have at least 3 characters and less or equal to 64. Keys and namespaces must match: <b>^[A-Za-z0-9_-.]{3,64}$</b></pre>
    <br/>

    <pre class="success">
GET /create/myapp/newcounter?initializer=10
⇒ 201 {"key": "newcounter", "namespace": "myapp", "admin_key": "YOUR_ADMIN_KEY", "value": 10}</pre>
    <pre class="fail">
GET /create/myapp/alreadyexists
⇒ 409 { "error": "Key already exists, please use a different key." }</pre>


    <h3 class="endpoint">/create/</h3>
    <p>Create a new counter with a random namespace and key. This endpoint does not take any parameters.</p>
    <pre class="success">
GET /create
⇒ 201 {"key": "randomkey", "namespace": "randomnamespace", "admin_key": "YOUR_ADMIN_KEY", "value": 0}</pre>

    <h3 class="endpoint">/info/:namespace/*key</h3>
    <p>Get detailed information about a counter, including its value, key, expiration, etc. Optionally specify the
        namespace.</p>
    <pre class="success">
GET /info/existing
⇒ 200 {
    "value": 42,           // Current counter value
    "full_key": "K:default:existing", // The full DB key (K:namespace:key)
    "is_genuine": true,   // Indicates if the counter was created with an admin key (false) or not (true)
    "expires_in": 172800, // Time to live (TTL) in seconds
    "expires_str": "2d",   // TTL in a human-readable format
    "exists": true        // Whether the key exists in the DB
}</pre>
    <pre class="fail">
GET /info/nonexisting
⇒ 404 {
    "value": -1,
    "full_key": "default:nonexisting",
    "is_genuine": true,
    "expires_in": -2e-9,
    "expires_str": "-2ns", // When the server received the request compared to when it output a response.
    "exists": false
}</pre>


    <h3 id="delete" class="endpoint">/delete/:namespace/*key (Requires Admin Key)</h3>
    <p>Delete a counter. Specify both namespace and key. Include the admin key in the `Authorization` header.</p>
    <pre class="success">
POST /delete/myapp/mycounter
Authorization: Bearer YOUR_ADMIN_KEY
⇒ 200 { "status": "ok", "message": "Deleted key: myapp:mycounter" }
</pre>


    <h3 class="endpoint">/set/:namespace/*key?value=:value (Requires Admin Key)</h3>
    <p>Set the value of a counter, overwriting the existing value. Specify both namespace and key, and provide the
        `value` query parameter. Include the admin key in the `Authorization` header.</p>
    <pre class="success">
POST /set/myapp/mycounter?value=15
Authorization: Bearer YOUR_ADMIN_KEY
⇒ 200 { "value": 15 }
</pre>
    <pre class="fail">
POST /set/myapp/nonexisting?value=15
Authorization: Bearer YOUR_ADMIN_KEY
⇒ 404 { "error": "Key does not exist, please use a different key." }
</pre>

    <h3 class="endpoint">/reset/:namespace/*key (Requires Admin Key)</h3>
    <p>Reset a counter to 0. Specify both namespace and key. Include the admin key in the `Authorization` header.</p>
    <pre class="success">
POST /reset/myapp/mycounter
Authorization: Bearer YOUR_ADMIN_KEY
⇒ 200 { "value": 0 }
</pre>
    <pre class="fail">
POST /reset/myapp/nonexisting
Authorization: Bearer YOUR_ADMIN_KEY
⇒ 404 { "error": "Key doesnot exist, please use a different key." }
</pre>

    <h3 class="endpoint">/update/:namespace/*key?value=:amount (Requires Admin Key)</h3>
    <p>Increment or decrement a counter by the specified amount. Specify both namespace and key, and provide the value
        query parameter (positive to increment, negative to decrement). Include the admin key in the Authorization
        header.</p>
    <pre class="success">
POST /update/myapp/mycounter?value=5
Authorization: Bearer YOUR_ADMIN_KEY
⇒ 200 { "value": 20 } // Assuming the previous value was 15
</pre>
    <pre class="fail">
POST /update/myapp/nonexisting?value=-3
Authorization: Bearer YOUR_ADMIN_KEY
⇒ 404 { "error": "Key does not exist, please first create it using /create." }
</pre>


    <h3 class="endpoint">/stats</h3>
    <p>Gives some info about the server and database. The "commands" stats are updated every 30s per shard</p>
    <pre class="success">
GET /stats/
⇒ 200 {
  "commands": {
    "create": 20394, // total number of /create's
    "get": 403232,   // total number of /get's
    "hit": 703232,   // total number of /hit's
    "total": 2003058 // total number of requests served
  },
  "db_uptime": "5558", // database uptime in seconds
  "db_version": "6.0.16", // database version
  "expired_keys__since_restart": "130", // number of keys expired since db's last restart
  "key_misses__since_restart": "205", // number of keys not found since db's last restart
  "total_keys": 87904, // total number of keys created
  "version": "1.3.3", // Abacus's version
  "shard": "boujee-coorgi", // Handler shard
  "uptime": "1h23m45s" // shard uptime

}
</pre>

    <footer style="text-align: center; gap: 2rem; display: flex; flex-direction: row; align-items: center; justify-content: center">
        <h1 style="all: unset">
        made by <a href="https://jasoncameron.dev">Jason Cameron</a> as a replacement for <a
            href="https://countapi.xyz">CountAPI</a>.</h1>
        <h2 style="all: unset">
            <a href="https://github.com/JasonLovesDoggo/abacus" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
                </svg>
            </a>
        </h2>
    </footer>
    <script>
        let formatter = Intl.NumberFormat('en', {notation: 'compact'});
        document.querySelectorAll('div.code').forEach(el => {
            // then highlight each
            hljs.highlightElement(el);
        });

        function request(url, callback) {
            var req = new XMLHttpRequest();
            req.open("GET", url);
            req.responseType = 'json';
            req.onload = function () {
                if (this.status === 200 && typeof this.response === 'object')
                    callback(this.response);
                else
                    callback(null);
            }
            req.send();
        }

        function stats() {
            request("https://abacus.jasoncameron.dev/stats", function (obj) {
                if (obj) {
                    const commands = obj["commands"];
                    const keys = obj["total_keys"];

                    Array.from(document.querySelectorAll(`*[data-stat-id="version"]`)).map(o => o.innerText = obj["version"]);


                    Array.from(document.querySelectorAll(`*[data-stat-id="command_total"]`)).map(o => {
                        o.innerText = formatter.format(commands["total"])
                        o.title = `${commands["total"].toLocaleString()} requests served`
                    });

                    Array.from(document.querySelectorAll(`*[data-stat-id="hits"]`)).map(o => {
                        o.innerText = formatter.format(commands["hit"])
                        o.title = `${commands["hit"].toLocaleString()} hits`
                    });

                    Array.from(document.querySelectorAll(`*[data-stat-id="gets"]`)).map(o => {
                        o.innerText = formatter.format(commands["get"])
                        o.title = `${commands["get"].toLocaleString()} gets`
                    });


                    Array.from(document.querySelectorAll(`*[data-stat-id="keys"]`)).map(o => {
                        o.innerText = formatter.format(keys)
                        o.title = `${keys.toLocaleString()} keys created`
                    });
                }
            });
        }

        stats();
        request("https://abacus.jasoncameron.dev/hit/abacus/visits", function (obj) {
            if (obj) {
                document.getElementById('visits').innerText = formatter.format(obj.value);
                document.getElementById('visits').title = `${obj.value.toLocaleString()} visits`

            }
        });

        function updateDomain(domain) {
            document.querySelectorAll('.mysite').forEach(function (e) {
                e.innerText = domain;
            });
        }

        hljs.configure({tabReplace: '    '});
        document.addEventListener('DOMContentLoaded', function () {
            updateDomain("mysite.com");
            document.getElementById('domain').addEventListener('input', function (e) {
                e.target.value = e.target.value.replace('https://', '').replace('http://', '').replace(/[^A-Za-z0-9_\-.]/g, '');
                updateDomain(e.target.value);
            });
            document.querySelectorAll('div.highlight').forEach(function (block) {
                hljs.highlightBlock(block);
            });
        });
    </script>
</section>
</body>
</html>
